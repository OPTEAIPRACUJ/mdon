<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Międzynarodowy Dzień Osób z Niepełnosprawnością z Uniwersytetem Rzeszowskim, Fundacją OPTEA i portalem pracy iPRACUJZDALNIE.pl. Organizatorzy, w ramach wydarzenia, zapraszają również na  Mikołajkowy Jarmak Pracy podczas którego będzie można zakupić rękodzieło artystyczne wykonane przez osoby z niepełnosprawnością.">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <title>Lista formularzy</title>
  <link rel="stylesheet" href="/assets/custom.css">
  <link rel="stylesheet" href="/assets/404.67f322dd.css" />
  <link rel="stylesheet" href="/assets/index.840900b9.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Clicker+Script&family=Dosis:wght@200..800&display=swap"
    rel="stylesheet">
  <script type="module">document.addEventListener("alpine:init", () => { Alpine.data("Marquee", ({ speed: l = 1, spaceX: n = 0, dynamicWidthElements: s = !1 }) => ({ dynamicWidthElements: s, async init() { if (this.dynamicWidthElements) { const i = this.$el.querySelectorAll("img"); i && await Promise.all(Array.from(i).map(t => new Promise((r, a) => { t.complete ? r() : t.addEventListener("load", () => { r() }) }))) } this.originalElement = this.$el.cloneNode(!0); const e = this.$el.scrollWidth + n * 4; this.$el.style.setProperty("--marquee-width", e + "px"), this.$el.style.setProperty("--marquee-time", 1 / l * e / 100 + "s"), this.resize(), window.addEventListener("resize", o(this.resize.bind(this), 100)) }, async resize() { this.$el.innerHTML = this.originalElement.innerHTML; let e = 0; for (; this.$el.scrollWidth <= this.$el.clientWidth;)this.dynamicWidthElements ? await h(this.$el, this.originalElement.children[e].cloneNode(!0)) : this.$el.appendChild(this.originalElement.children[e].cloneNode(!0)), e += 1, e = e % this.originalElement.childElementCount; let i = 0; for (; i < this.originalElement.childElementCount;)this.$el.appendChild(this.originalElement.children[e].cloneNode(!0)), i += 1, e += 1, e = e % this.originalElement.childElementCount } })) }); const o = (l, n, s = !0) => { let e; return () => { const i = globalThis, t = arguments, r = s && !e; clearTimeout(e), e = setTimeout(function () { e = null, s || l.apply(i, t) }, n), r && l.apply(i, t) } }, h = (l, n) => new Promise((s, e) => { new ResizeObserver((t, r) => { r.disconnect(), s(t) }).observe(n), l.appendChild(n) });
  </script>
  <style>
    .registration-table {
      border-spacing: 12px;
      border-collapse: inherit;
    }
    .wyszukiwanie-input {
        max-width: 400px;
      }

    @media screen and (max-width: 768px) {
      .wyszukiwanie-input {
        max-width: 300px;
      }
    }
  </style>
  <script type="module" src="/page.8271e986.js"></script>
</head>

<body>
  <div class=" flex flex-col">
    <header class="flex flex-col lg:flex-row items-start lg:flex-wrap justify-center astro-3WCREGVO !mx-0 !px-0">
      <nav style="background-color: #024f49;" class="astro-3WCREGVO w-full" x-data="{ isOpen: false }"
        @keydown.escape="isOpen = false">
        <div class="hidden lg:flex justify-between astro-3WCREGVO p-6 pb-8">
          <div class="flex items-center ">
            <a class="cursor-pointer" href="/">
              <img style="max-width: 100px;" src="/assets_2024/white-logo.png" alt="Białe logo">
            </a>
            <div class="ml-4 text-white">
              <p style="font-family: 'Dosis', sans-serif;">
                <span style="font-weight: 600;">KONGRES</span>
                <span style="font-weight: 300;">
                  z okazji <br>
                  Międzynarodowego
                  Dnia Osób z Niepełnosprawnością
                </span>
              </p>
              <p style="font-family:'Clicker Script', cursive; font-size: 24px;">Mikołajkowy Jarmark Pracy i Rękodzieła
              </p>
            </div>
          </div>
          <div class="flex gap-8 items-end nav-list" style="font-family: 'Dosis', sans-serif;">
            <a href="/">
              <img style="max-width: 24px;" src="/assets_2024/home_bialy.png" alt="Domek">
            </a>
            <a href="/kongres/" class="astro-3WCREGVO">Trochę historii</a>
            <a href="/program/" class="astro-3WCREGVO">Program</a>
            <!--
<a href="/jarmark/" class="astro-3WCREGVO">Jarmark</a>
-->
            <a href="/formularz-zgloszeniowy/" class="astro-3WCREGVO">Formularz rejestracyjny</a>
            <div style="cursor: pointer; color: #f2e6d8; position: relative;" x-data="{ open: false }" @click="open = !open">
              Poprzednie edycje
              <div x-show="open" class="menu-dropdown">
                  <ul>
                      <li><a href="/mdon_2022/">Edycja 2022</a></li>
                      <li><a href="https://2023.mdon.pl/">Edycja 2023</a></li>
                  </ul>
              </div>
          </div>
            <div style="cursor: pointer; color: #f2e6d8; position: relative;" x-data="{ open: false }"
              @click="open = !open">
              Nasi Patroni
              <div x-show="open" class="menu-dropdown">
                <ul>
                  <li><a href="/patronat-merytoryczny/">Patroni Merytoryczni</a></li>
                </ul>
              </div>
            </div>
            <a href="/organizatorzy/" class="astro-3WCREGVO">Organizatorzy</a>
            <a href="/kontakt/" class="astro-3WCREGVO">Kontakt</a>
          </div>
        </div>
        <button @click="isOpen = !isOpen" type="button" style="background-color: white; border-radius: 12px;"
          class="fixed top-4 right-4 block lg:hidden px-2 text-black hover:text-black focus:outline-none focus:text-black z-50 astro-3WCREGVO"
          :class="{ 'transition transform-180': isOpen }">
          <svg class="h-12 w-12 fill-current astro-3WCREGVO" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path x-show="isOpen" fill-rule="evenodd" clip-rule="evenodd"
              d="M18.278 16.864a1 1 0 0 1-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 0 1-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 0 1 1.414-1.414l4.829 4.828 4.828-4.828a1 1 0 1 1 1.414 1.414l-4.828 4.829 4.828 4.828z"
              class="astro-3WCREGVO"></path>
            <path x-show="!isOpen" fill-rule="evenodd"
              d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"
              class="astro-3WCREGVO"></path>
          </svg>
        </button>

        <!-- Mobilka navbar -->
        <div style="z-index: 1;" class="fixed min-h-screen bg-white top-0 left-0 w-full astro-3WCREGVO" x-show="isOpen">
          <div aria-label="Menu nawigacyjne" class="flex flex-col space-y-1 mt-28 text-lg astro-3WCREGVO"><a href="/"
              class="flex rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO"
              style="font-weight: bold">
              <img style="max-width: 24px; margin-right: 12px; background: black; border-radius: 8px; padding: 4px;"
                src="/assets_2024/home_bialy.png" alt="Domek">
              Strona główna</a>
            <a href="/kongres/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Trochę historii</a>
            <a href="/program/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Program</a>
            <!-- 
<a href="/jarmark/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Jarmark
            </a>
-->
            <a href="/formularz-zgloszeniowy/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Formularz rejestracyjny
            </a>
            <div style="cursor: pointer; padding-left: 1rem; position: relative;" x-data="{ open: false }" @click="open = !open">
              Poprzednie edycje
              <div x-show="open" class="menu-dropdown" style="max-width: 250px;">
                  <ul>
                      <li><a href="/mdon_2022/">Edycja 2022</a></li>
                      <li><a href="https://2023.mdon.pl/">Edycja 2023</a></li>
                  </ul>
              </div>
          </div>
            <a href="/organizatorzy/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Organizatorzy
            </a>
            <div style="cursor: pointer; padding-left: 1rem; position: relative;" x-data="{ open: false }"
              @click="open = !open">
              Nasi Patroni
              <div x-show="open" class="menu-dropdown" style="max-width: 250px;">
                <ul>
                  <li><a href="/patronat-merytoryczny/">Patroni Merytoryczni</a></li>
                </ul>
              </div>
            </div>
            <a href="/kontakt/"
              class="block rounded-lg px-4 py-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 astro-3WCREGVO">
              Kontakt
            </a>
          </div>
        </div>
        <!-- Mobilka navbar end -->
      </nav>
    </header>

    <div class="flex justify-center" style="background-color: white;">
      <main style="overflow-x: auto; display:block; background-color: white">
        <form x-data="{
          fetchTotal() {
            const url = `https://api.mdon.pl/registration_data/count`;
            fetch(url, {
              headers: {
                'Authorization': 'Bearer kVH62lImcXLQ5bZJE2QDTsWKwwObAmzJ',
              }
            })
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.json();
            }).then(data => {
              if (!data.total_count) return;
              this.total = data.total_count
            })
            .catch(err=> {
              console.log(err)
            })
          },
          deleteRegistrationData(id) {
            fetch(`https://api.mdon.pl/registration_data/${id}`, {
              method: 'DELETE',
              headers: {
                'Authorization': 'Bearer kVH62lImcXLQ5bZJE2QDTsWKwwObAmzJ',
              }
            })
              .then(response => {
                if (response.ok) {
                  setTimeout(() => {
                    this.fetchData()
                  }, 1500);
                } else {
                  console.error('Error deleting registration data');
                }
              })
              .catch(error => {
                console.error('Error:', error);
              });
          },
          fetchData() {
            const url = `https://api.mdon.pl/registration_data?search=${this.searchPhrase}`;

            fetch(url, {
              headers: {
                'Authorization': 'Bearer kVH62lImcXLQ5bZJE2QDTsWKwwObAmzJ',
              }
            })
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              this.isPasswordInvalid = false;
              this.fetchTotal();
              return response.json();
            })
            .then(data => {
              this.registrations = data;
              this.isLoading = false;
            })
            .catch(err => {
              this.error = err.message;
              this.isLoading = false;
            });
          },
          submitForm() {
            if (this.password === '9TsPXTDqhSZw6PK') {
              this.isPasswordFormVisible =  false;
              this.fetchData();
            } else {
              this.isPasswordInvalid = true
            }
        },
          password: '',
          tableId: 1,
          registrations: [], isLoading: true, error: null,
          isPasswordFormVisible: true,
          isPasswordInvalid: false,
          searchPhrase: '',
          total: 0,
      }" @submit.prevent="submitForm" class="space-y-6">
          <div class="pb-6">
            <h1 class="text-3xl text-mdon_blue font-bold uppercase text-center lg:text-left pb-16 mt-16">
              Lista formularzy zgłoszeniowych
            </h1>
            <div x-show="isPasswordFormVisible"
              class="flex flex-col lg:flex-row lg:space-x-4 items-center lg:items-end">
              <label class="lg:w-2/5">Hasło do tabeli</span>
              </label>
              <div class="flex gap-2">
                <input class="rounded-3xl border-gray-400 w-full" type="password" required x-model="password">

                <button type="submit" class="bg-mdon_blue rounded-full ml-4 text-white text-xl px-4">
                  ok
                </button>
              </div>
            </div>

            <h5 x-show="isPasswordInvalid" style="margin: 12px 0; color: red; float: right; padding-right: 24px;">Hasło
              niepoprawne</h5>
          </div>

          <div x-show="!isPasswordFormVisible" style="margin-top: -12px; padding: 12px 12px;">
            <div x-cloak>
              <template x-if="isLoading">
                <p>Loading...</p>
              </template>

              <template x-if="error">
                <p>Error: <span x-text="error"></span></p>
              </template>

              <template x-if="!isLoading && !error">
                <div class="flex flex-col">
                  <div style="margin-bottom: 12px; gap: 12px;"
                    class="flex flex-col lg:flex-row lg:space-x-4 items-center justify-start">
                    <label class="lg:w-3/5">Wyszukiwanie </label>
                    <input class="rounded-3xl border-gray-400 wyszukiwanie-input"
                      placeholder="Imię, nazwisko, Email, Telefon lub firma" type="text" x-model="searchPhrase"
                      x-init="$watch('searchPhrase', () => fetchData())">
                  </div>

                  <div style="display: flex; justify-content: flex-end; width: 100%;">
                    <caption style="display: flex; justify-content: flex-end;">Łącznie wszystkich zgłoszeń: <span
                        x-text="total" style="margin-left: 12px;"></span></caption>
                  </div>
                  <table class="registration-table">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Imię i nazwisko</th>
                        <th>Email</th>
                        <th>Telefon</th>
                        <th>Firma</th>
                        <th>Liczba uczestników</th>
                        <th>Dodany</th>
                        <th>I.M</th>
                        <th>K.T</th>
                        <th>P.Z</th>
                        <th>P.D</th>
                        <th>W.W</th>
                        <!-- Add more headers as necessary -->
                      </tr>
                    </thead>
                    <tbody>
                      <template x-for="(registration, index) in registrations" :key="index">
                        <tr>
                          <td x-text="index + 1"></td>
                          <td x-text="registration.fullName"></td>
                          <td x-text="registration.email"></td>
                          <td x-text="registration.phone"></td>
                          <td x-text="registration.company"></td>
                          <td x-text="registration.amountOfParticipants"></td>
                          <td x-text="new Date(registration.created_at).toLocaleString()"></td>
                          <td x-text="registration.informacjeMarketingowe ? 'tak': 'nie'"></td>
                          <td x-text="registration.kontaktTelefoniczny ? 'tak': 'nie'"></td>
                          <td x-text="registration.potwierdzenieZgod ? 'tak': 'nie'"></td>
                          <td x-text="registration.przetwarzanieDanych ? 'tak': 'nie'"></td>
                          <td x-text="registration.wykorzystanieWizerunku ? 'tak': 'nie'"></td>
                          <td class="text-red-600 cursor-pointer text-bold"
                            @click="deleteRegistrationData(registration.id)">Usuń</td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                  <div x-show="registrations.length && registrations.length !== total"
                    style="display: flex; justify-content: flex-end; width: 100%; margin-bottom: 24px;">
                    <caption style="display: flex; justify-content: flex-end;">Zgłoszeń po przefiltrowaniu: <span
                        x-text="registrations.length" style="margin-left: 12px;"></span></caption>
                  </div>
                </div>
              </template>

            </div>

            <div class="mt-2">
              <p>I.M - Informacje Marketingowe</p>
              <p>K.T - Kontakt Telefoniczny</p>
              <p>P.Z - Potwierdzenie Zgód</p>
              <p>P.D - Przetwarzanie Danych</p>
              <p>W.W - Wykorzystanie Wizerunku</p>
            </div>
          </div>
        </form>

      </main>
    </div>
  </div>

  <footer class="pt-4 flex" style="gap: 24px; justify-content: flex-end; background-color: white;">
    
    <a href="/polityka-prywatnosci/">Polityka Prywatności</a>
    <a href="/rodo/">RODO</a>
    <a href="/kontakt/">Kontakt</a>
    <a href="#" style="margin-left: 48px;">Fundacja OPTEA i Miasto Stołeczne Warszawa</a>
    <a href="https://www.facebook.com/fundacjaoptea/" target="_blank" style="max-width: 36px;">
      <img class="max-w-[]" src="/assets_2024/fb.png" alt="Facebook logo">
    </a>
  </footer>
</body>

</html>